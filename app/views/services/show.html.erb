<header class="tc ph4">
  <h1 class="fw2 mv3">
    <%= @service.name %>
  </h1>
  <p class="mt0 lh-copy">
    <%= link_to "Website", service_path(@service.url) %>
    <% if @service.wikipedia? %>
    <%= link_to "Wikipedia", service_path(@service.wikipedia) %>
    <% else %>
    Wikipedia
    <% end %>
  </p>

  <p>
    <button class="btn btn-success" id="orderByPoint"> order by Rating </button>

    <%= javascript_tag do %>
    document.getElementById('orderByPoint').addEventListener("click", (event) => {
    let elems =  document.querySelectorAll(".card-point");
    // convert nodelist to array
    var array = [];
    for (var i = 0; i < elems.length; i++) {
    array[i] = elems[i];
  }
  // perform sort depending on classname
  if(event.currentTarget.className=="btn btn-success"){
  array.sort(function(a, b) {
  return a.dataset.rating - b.dataset.rating;
});
event.currentTarget.classList.remove("btn-success");
event.currentTarget.classList.add("btn-danger");
}
else if(event.currentTarget.className== "btn btn-danger"){
array.sort(function(a, b) {
return b.dataset.rating -  a.dataset.rating;
});
event.currentTarget.classList.remove("btn-danger");
event.currentTarget.classList.add("btn-success");
}
// join the array back into HTML
var output = "";
for (var i = 0; i < array.length; i++) {
output += array[i].outerHTML;
}
// append output to div 'points-table-container'
document.getElementById('points-table-container').innerHTML = output;
});
<% end %>


<% unless current_user.nil? %>
  <%= link_to 'Edit Service', edit_service_path, class: 'btn btn-primary' %>
<% end %>

</p>

<div id="custom-search-input">
  <div class="input-group col-xs-12 mb15">
    <%= form_tag(service_path(@service), method: :get) do %>
    <%= collection_select :topic, :id , Topic.all, :id, :title, {prompt: "Select a Topic"} %>

    <%= submit_tag 'Search', class: "btn btn-default" %>
    <%= link_to "Reset", service_path(@service), class: "btn btn-default" %>

    <% end %>
  </div>
</div>
</header>

<div class="row">
  <div class="container card-container">
    <%= render 'table', points: @points %>
  </div>
</div>
</div>

